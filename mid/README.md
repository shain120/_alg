# OFDM 模擬圖表詳細解析

本文件旨在解釋 OFDM (Orthogonal Frequency Division Multiplexing) 模擬程式中產生的兩張核心圖表。這兩張圖分別展示了訊號在**頻域 (Frequency Domain)** 的物理特性與**複數平面 (Complex Plane)** 上的數據調變狀態。

---

## 圖表一：OFDM Orthogonal Subcarriers (正交子載波)

這張圖（左側圖表）展示了 OFDM 訊號在**頻率域**上的樣子。這是理解 OFDM 如何節省頻寬並避免干擾的關鍵。

### 1. 視覺特徵
* **多色波形**：每一種顏色的波形代表一個獨立的**子載波 (Subcarrier)**。
* **波形形狀**：這些是 **Sinc 函數** ($sinc(x) = \frac{\sin(x)}{x}$)。
    * **原理**：在數位通訊中，時域上的訊號通常是矩形脈衝 (Rectangular Window)。根據傅立葉變換原理，時域的矩形對應到頻域就是 Sinc 波形。

### 2. 核心概念：正交性 (Orthogonality)
這張圖最重要的地方在於它展示了「正交」的數學定義。請觀察圖中的波峰與零點：

* **峰值對齊零點**：
    * 當**藍色波形**達到最高能量點（Peak，也就是我們讀取該載波數據的時刻）時...
    * **所有其他顏色的波形**（橘色、綠色、紅色...）剛好都穿越 **0 (Zero Crossing)**。
* **物理意義**：
    * 這意味著在採樣點上，各個子載波之間**完全沒有互相干擾 (No Inter-Carrier Interference, ICI)**。
    * 即使這些波形在頻譜上看起來緊密重疊，我們仍然可以完美地將它們分離出來。

### 3. 優勢
* **頻譜效率極高**：傳統通訊需要在頻道之間留「保護帶 (Guard Band)」來防止重疊，但 OFDM 允許波形重疊（只要保持正交），因此能在有限的頻寬內塞入更多數據。

---

## 圖表二：QPSK Constellation (星座圖)

這張圖（右側圖表）展示了數據在**複數平面 (Complex Plane)** 上的狀態。它告訴我們「傳送了什麼資訊」以及「訊號品質如何」。

### 1. 座標軸意義
* **X 軸 (Real / In-Phase)**：實部，也稱為 I 路。
* **Y 軸 (Imaginary / Quadrature)**：虛部，也稱為 Q 路。
* 每一個點都代表一個複數符號 $S = I + jQ$。

### 2. 調變模式：QPSK (Quadrature Phase Shift Keying)
圖中有 4 個聚落，代表使用 QPSK 調變：
* **4 個相位點**：系統將數據映射到四個象限中 (例如：$45^\circ, 135^\circ, 225^\circ, 315^\circ$)。
* **攜帶資訊**：每個符號攜帶 **2 bits** 資訊。
    * 例如（依據映射表）：
        * `00` $\rightarrow$ 第一象限 $(1, 1)$
        * `01` $\rightarrow$ 第二象限 $(-1, 1)$
        * `10` $\rightarrow$ 第三象限 $(-1, -1)$
        * `11` $\rightarrow$ 第四象限 $(1, -1)$

### 3. 紅色 X vs. 藍色圓點
* **紅色 X (Reference/Tx)**：
    * 這是**發送端**原本想要傳送的理想位置（標準答案）。
* **藍色圓點 (Received/Rx)**：
    * 這是**接收端**實際解調出來的訊號點。
    * 藍點沒有完全重疊在紅叉上，而是散落在周圍，這是因為經過了**雜訊 (Noise)** 的干擾。

### 4. 訊號品質解讀
* **集中**：如果藍點緊緊包圍紅叉，代表雜訊低 (高信噪比 SNR)，通訊品質好。
* **發散**：如果藍點散得很開，甚至跨越了座標軸跑到別的象限，就會發生**位元錯誤 (Bit Error)**。
* **本圖結論**：圖中的藍點非常集中，代表模擬環境中的雜訊極低，解碼準確率應為 100%。

---

## 總結：兩圖的關係

| 特性 | 左圖 (Subcarriers) | 右圖 (Constellation) |
| :--- | :--- | :--- |
| **領域** | **頻率域 (Frequency Domain)** | **複數/調變域 (Modulation Domain)** |
| **關注點** | 訊號如何**傳輸**與物理排列 | 數據如何**編碼**與解碼 |
| **關鍵字** | Sinc 波形、正交性、IFFT | QPSK、I/Q 通道、雜訊 (Noise) |
| **對應程式碼** | `draw()` 中的 `np.sinc()` 繪圖 | `L1_ofdm` 中的 `mapping` 與 `noise` |
